name: Keep Scheduled Workflows Alive

on:
  schedule:
    # Runs at 1:00 AM UTC on the 1st day of every month (well within the 60-day limit)
    - cron: '0 1 1 * *'
  workflow_dispatch:
    # Allows for manual triggering if needed

jobs:
  keep_alive:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        # Use a Personal Access Token (PAT) here for maximum reliability
        # GITHUB_TOKEN has limitations, so a PAT is safer for self-triggering commits
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
      - name: Create or Update a timestamp file
        run: |
          DATE=$(date +%Y-%m-%dT%H:%M:%S)
          echo "Last Keep Alive Commit: $DATE" > .keep-alive
          
      - name: Commit and Push
        # Use a dedicated action to handle committing and pushing easily
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          commit_message: "ðŸ¤– Keep Alive: Scheduled activity commit"
          file_pattern: '.keep-alive' # Only commit the newly created/updated file
          # Use the GITHUB_TOKEN to commit, which should be fine for a simple file update
          # but note the PAT recommendation in the checkout step for best practice.